# Amazon AWS SAM #Serverless #AWS #Framework
AWS Serverless Application Model (SAM) is an open-source framework for building serverless applications on AWS.

## Introduction to AWS SAM #Overview #Concepts #Basics
Core concepts and benefits of using AWS SAM.
### What is SAM? #Definition #Purpose
An extension of AWS CloudFormation providing a simplified syntax for defining serverless resources.
### Why Use SAM? #Benefits #Advantages
Simplified syntax, local testing & debugging, built-in best practices, extension of CloudFormation.
### Key Components #Architecture #Elements
SAM Template, SAM CLI, Supported Resources.
### SAM vs. CloudFormation #Comparison #Relationship
SAM transforms into CloudFormation during deployment. SAM offers shorthand syntax for common serverless patterns.
### SAM vs. Serverless Framework vs. CDK #Comparison #Alternatives
Positioning SAM relative to other Infrastructure as Code (IaC) and serverless frameworks.

## SAM Template Specification #Syntax #Structure #Core
Details of the `template.yaml` or `template.json` file structure and syntax.
### Template Anatomy #FileStructure #Sections
Overall structure of a SAM template file.
#### `AWSTemplateFormatVersion` #Version #Required
Specifies the CloudFormation template version (usually '2010-09-09').
#### `Transform` #Declaration #Required
Declares the use of the AWS SAM transform (`AWS::Serverless-2016-10-31`).
#### `Globals` Section #Defaults #Configuration
Define common properties for Functions, APIs, SimpleTables etc., reducing duplication.
##### Function Globals #Lambda #Settings
Runtime, Handler, MemorySize, Timeout, Environment Variables, Layers, VPC Config, etc.
##### Api Globals #APIGateway #Settings
Auth, Cors, EndpointConfiguration, etc.
##### HttpApi Globals #HTTPAPI #Settings
Auth, Cors, etc.
#### `Resources` Section #Definitions #Required
Defines the AWS resources included in the application (Functions, APIs, Databases, etc.). This is the core section.
#### `Parameters` Section #Inputs #Customization
Define input parameters for stack creation/update.
#### `Outputs` Section #Exports #References
Define values outputted after stack creation (e.g., API endpoint URL).
#### `Conditions` Section #Logic #DeploymentControl
Control resource creation based on environment or parameters.
#### `Mappings` Section #Lookups #Configuration
Define lookup tables for configuration values (e.g., AMI IDs per region).
#### `Description` #Metadata #Documentation
A text string describing the template.
### Intrinsic Functions #CloudFormation #Functions
Using CloudFormation intrinsic functions (`!Ref`, `!GetAtt`, `!Sub`, etc.) within SAM templates.
### Metadata Section #SAMSpecific #Tooling
Used for defining metadata, often leveraged by tooling like AWS Cloud9 or CodeStar.
#### `AWS::ServerlessRepo::Application` #ServerlessRepo #Publishing
Metadata for publishing applications to the AWS Serverless Application Repository.

## AWS SAM CLI #Tooling #Commands #Development
The command-line interface for creating, testing, packaging, and deploying SAM applications.
### Installation & Configuration #Setup #Prerequisites
Installing the SAM CLI (Python, Pip, Docker) and configuring AWS credentials.
### Core Commands #Workflow #Actions
Primary commands for the development lifecycle.
#### `sam init` #Project #Bootstrap
Initialize a new serverless application with sample templates (Hello World).
#### `sam build` #Compilation #Dependencies
Builds the application, fetches dependencies, and prepares artifacts for packaging or local testing.
Handles different runtimes (Node.js, Python, Java, Go, .NET, Ruby).
##### Build Options #Flags #Customization
`--use-container`, `--manifest`, `--cached`
#### `sam package` #Packaging #S3
Packages local artifacts (code, dependencies) into a zip file, uploads to S3, and generates a deployable CloudFormation template.
#### `sam deploy` #Deployment #CloudFormation
Deploys the packaged application to AWS CloudFormation, creating or updating the stack.
##### Guided Deployments #Interactive #Configuration
`--guided` flag for interactive deployment configuration prompts.
##### Deployment Options #Flags #Control
`--stack-name`, `--s3-bucket`, `--capabilities`, `--parameter-overrides`, `--config-file`, `--resolve-s3`
#### `sam sync` #SAMAccelerate #FastDeployment
Rapidly sync local changes to the AWS Cloud without a full CloudFormation deployment (part of SAM Accelerate).
#### `sam delete` #Cleanup #StackRemoval
Deletes the deployed CloudFormation stack and associated resources.
#### `sam logs` #Monitoring #Troubleshooting
Fetch logs generated by Lambda functions in the deployed stack.
#### `sam validate` #Linting #Checking
Validate a SAM template against the specification.
### Local Testing & Debugging Commands #LocalDev #Simulation
Commands for running and debugging serverless applications locally.
#### `sam local invoke` #Lambda #Testing
Invokes a Lambda function locally using an event payload.
#### `sam local start-api` #APIGateway #Testing
Starts a local endpoint that simulates Amazon API Gateway, serving requests to local Lambda functions.
#### `sam local start-lambda` #Lambda #Emulation
Starts a local endpoint simulating the Lambda Invoke API.
#### `sam local generate-event` #Events #TestingData
Generates sample event payloads for various AWS services (S3, API Gateway, SNS, etc.).
### Configuration Files #Settings #Environment
Using `samconfig.toml` to store deployment parameters and configurations per environment.

## Deployment with SAM #CloudFormation #Process #Lifecycle
The process of deploying SAM applications to AWS.
### Deployment Workflow #Steps #Automation
The sequence: `sam build` -> `sam package` -> `sam deploy`.
### CloudFormation Stacks #Management #Updates
How SAM applications map to CloudFormation stacks.
### Change Sets #Preview #Safety
Previewing changes before applying updates to a CloudFormation stack (`sam deploy --no-execute-changeset`).
### Capabilities #Permissions #DeploymentSafety
Acknowledging required IAM capabilities (`CAPABILITY_IAM`, `CAPABILITY_NAMED_IAM`, `CAPABILITY_AUTO_EXPAND`).
### Stack Policies #Protection #Governance
Preventing accidental updates or deletions of critical stack resources.
### Rollback Configuration #Failure #Recovery
Configuring CloudFormation rollback behavior on deployment failure.

## Supported AWS Resources #Integration #Services #ServerlessTypes
Overview of the simplified resource types SAM provides.
### `AWS::Serverless::Function` #Lambda #Compute
Defines an AWS Lambda function, simplifying properties like CodeUri, Handler, Runtime, Policies, Events.
#### Event Sources #Triggers #Invocation
API Gateway (Api, HttpApi), S3, SNS, SQS, Kinesis, DynamoDB Streams, EventBridge, Schedule, etc.
#### Provisioned Concurrency #Performance #Scaling
Configuring provisioned concurrency for Lambda functions.
#### Lambda Layers #Dependencies #CodeSharing
Referencing Lambda Layers for shared code or dependencies.
#### Function URLs #DirectAccess #HTTPS
Configuring Lambda Function URLs.
### `AWS::Serverless::Api` #APIGateway #REST
Defines an Amazon API Gateway REST API. Simplifies stages, deployment, CORS, auth.
### `AWS::Serverless::HttpApi` #APIGateway #HTTP
Defines an Amazon API Gateway HTTP API (v2). Lower cost, lower latency alternative to REST APIs.
### `AWS::Serverless::SimpleTable` #DynamoDB #Database
Defines an Amazon DynamoDB table with simplified syntax (defaults to PAY_PER_REQUEST billing).
### `AWS::Serverless::StateMachine` #StepFunctions #Orchestration
Defines an AWS Step Functions state machine using Amazon States Language (ASL).
### `AWS::Serverless::Application` #NestedStacks #Composition
Embeds a nested application/stack from the AWS Serverless Application Repository or S3.
### `AWS::Serverless::LayerVersion` #LambdaLayers #Versioning
Defines a Lambda Layer version.
### `AWS::Serverless::Connector` #Permissions #Integration
Simplifies connecting resources by automatically creating necessary IAM policies and configurations between them (e.g., Function reading from SQS).

## Local Testing and Debugging #Development #Simulation #Troubleshooting
Techniques for testing and debugging SAM applications without deploying to AWS.
### Using `sam local invoke` #FunctionTesting #UnitTesting
Testing individual Lambda functions with sample event data.
### Using `sam local start-api` #APITesting #IntegrationTesting
Running a local HTTP server that simulates API Gateway endpoints.
### Using `sam local start-lambda` #LambdaEmulation #APITesting
Running a local endpoint that emulates the Lambda service invoke endpoint.
### Debugging Locally #Breakpoints #IDEIntegration
Attaching debuggers (e.g., VS Code debugger) to locally running Lambda functions. Requires Docker.
### Docker Requirement #Dependencies #Environment
Understanding the role of Docker for simulating the Lambda execution environment locally.
### Hot Reloading #DevelopmentSpeed #Efficiency
Using `--warm-containers` or file watchers for faster local development cycles.

## Advanced SAM Features #Capabilities #Extensions #Optimization
More sophisticated features and capabilities of AWS SAM.
### SAM Accelerate #FastFeedback #Sync
(`sam sync --watch`) Provides near-instant feedback loops by synchronizing local changes directly to the cloud service (Lambda, API Gateway, Step Functions).
### Nested Applications #Modularity #Reuse
Structuring large applications by composing multiple SAM templates/stacks.
### Policy Templates #IAM #Permissions #Shortcuts
Pre-defined IAM policy templates (e.g., `SQSPollerPolicy`, `DynamoDBCrudPolicy`) for common permissions.
### API Gateway Authorizers #Security #Authentication #Authorization
Configuring Lambda authorizers (Token, Request) and Cognito User Pool authorizers for APIs.
### API Gateway Request/Response Transformation #Mapping #Integration
Using Velocity Template Language (VTL) or mapping templates with API Gateway via SAM.
### Lambda Destinations #Async #ErrorHandling
Configuring OnSuccess and OnFailure destinations for asynchronous Lambda invocations (SNS, SQS, EventBridge, another Lambda).
### CodeDeploy Integration #DeploymentStrategies #Safety
Implementing safe deployment strategies like Canary and Linear deployments for Lambda functions.
### SAM Connectors #ResourceWiring #Permissions
(`AWS::Serverless::Connector`) Abstracting the creation of IAM policies and resource configurations for common integrations.
### Sharing Resources via Exports/Imports #CrossStack #Dependencies
Using CloudFormation exports and `Fn::ImportValue` to share resources between SAM stacks.

## Security with SAM #IAM #Permissions #Networking #Secrets
Security considerations when building serverless applications with SAM.
### IAM Roles and Permissions #LeastPrivilege #AccessControl
Defining execution roles for Lambda functions and managing permissions precisely.
### Resource Policies #AccessControl #ServiceIntegration
Defining policies on resources like SQS queues or S3 buckets accessed by functions.
### API Gateway Security #AuthN #AuthZ #Throttling
Using API Keys, Usage Plans, Authorizers (Lambda, Cognito), Resource Policies.
### VPC Configuration #Networking #PrivateResources
Configuring Lambda functions to access resources within a Virtual Private Cloud (VPC).
### Secrets Management #Credentials #SecureStorage
Integrating with AWS Secrets Manager or Systems Manager Parameter Store for managing sensitive data.
### Input Validation #API #Lambda #SecurityBestPractice
Validating incoming request payloads at the API Gateway level or within the Lambda function.

## CI/CD Integration #Automation #DevOps #Pipelines
Integrating SAM applications into continuous integration and continuous delivery pipelines.
### Pipeline Stages #Source #Build #Test #Deploy
Typical stages in a serverless CI/CD pipeline.
### Using AWS CodePipeline / CodeBuild #AWSNative #DevOpsTools
Building CI/CD pipelines using AWS developer tools.
### Using Jenkins, GitLab CI, GitHub Actions #ThirdParty #DevOpsTools
Integrating SAM CLI commands (`build`, `package`, `deploy`) into other CI/CD platforms.
### Environment Management #Stages #Prod #Dev
Strategies for managing different deployment environments (dev, staging, prod) with SAM (e.g., using parameter overrides, separate config files).
### Automated Testing #Unit #Integration #E2E
Incorporating different levels of automated testing into the pipeline.

## SAM Best Practices & Patterns #Design #Architecture #Optimization
Recommended practices and common architectural patterns for building robust SAM applications.
### Project Structure #Organization #Maintainability
Structuring code, templates, and tests for clarity and scalability.
### Dependency Management #Packaging #Layers
Managing function dependencies effectively (e.g., using `sam build --use-container`, Lambda Layers).
### Environment Variables #Configuration #Secrets
Using environment variables for configuration and integrating with Secrets Manager/Parameter Store.
### Monitoring and Logging #Observability #CloudWatch
Implementing effective logging, metrics, and tracing using Amazon CloudWatch.
### Error Handling #Resilience #DeadLetterQueues
Implementing robust error handling, retries, and Dead Letter Queues (DLQs).
### Cost Optimization #Efficiency #ServerlessCost
Strategies for minimizing the cost of SAM applications (e.g., choosing appropriate memory sizes, using HTTP APIs).
### Single Responsibility Principle #Microservices #Functions
Designing functions with a clear, single purpose.
### Shared Infrastructure Stacks #Networking #Databases
Managing shared resources like VPCs or databases in separate stacks.

## Comparing SAM #Alternatives #Frameworks #IaC
Comparing AWS SAM with other relevant technologies.
### SAM vs. Native CloudFormation #ProsCons #Syntax
Detailed comparison focusing on syntax simplification, local tooling, and abstractions.
### SAM vs. Serverless Framework #ProsCons #Features
Comparing features, community support, provider flexibility, and plugin ecosystems.
### SAM vs. AWS CDK (Cloud Development Kit) #ProsCons #ProgrammingLanguage
Comparing the declarative YAML/JSON approach of SAM with the imperative programming language approach of CDK.
