# I. Introduction to Penetration Testing and Ethical Hacking

## Understanding Penetration Testing Concepts

### Defining Penetration Testing

*   Purpose: Identifying vulnerabilities and security weaknesses in systems.
*   Scope: Defining the boundaries and limitations of the test.
*   Types: Black box, White box, Grey box testing.

### Ethical Hacking Principles

*   Legality: Adhering to legal regulations and obtaining necessary permissions.
*   Ethics: Maintaining confidentiality, integrity, and availability of data.
*   Responsibilities: Documenting findings and reporting vulnerabilities responsibly.

## Setting Up a Penetration Testing Environment

### Choosing a Penetration Testing Distribution

*   Kali Linux: Popular distribution with pre-installed tools.
*   Parrot OS: Another popular distribution for penetration testing and digital forensics.

### Virtualization

*   VirtualBox: Creating and managing virtual machines for testing.
*   VMware: Another popular virtualization software.

### Installing and Configuring Penetration Testing Tools

*   Package Management: Using `apt` (Kali/Debian) to install and update tools.
*   Example: `sudo apt update && sudo apt install nmap`

# II. Information Gathering

## Passive Information Gathering

### OSINT (Open Source Intelligence)

*   Search Engines: Using Google dorks to find sensitive information. Example: `site:example.com filetype:pdf "password"`
*   Social Media: Gathering information from social media profiles.
*   WHOIS Lookup: Obtaining domain registration information using `whois example.com`.
*   DNS Enumeration: Using `nslookup` and `dig` to gather DNS records.
    * Example: `dig example.com ANY`

## Active Information Gathering

### Network Scanning

*   Ping Sweeps: Determining live hosts using `ping` or `fping`.
*   Port Scanning: Identifying open ports and services using `nmap`.
    * Example: `nmap -sS -p 1-1000 example.com` (SYN scan on ports 1-1000)

### Service Enumeration

*   Banner Grabbing: Identifying service versions by connecting to ports.
*   Example: `nc example.com 80` (Connect to port 80 to view HTTP banner)
*   Service-Specific Tools: Using tools like `smtp-enum` to enumerate user accounts on SMTP servers.

# III. Vulnerability Analysis

## Identifying Vulnerabilities

### Vulnerability Scanners

*   Nessus: Commercial vulnerability scanner with a wide range of plugins.
*   OpenVAS: Open-source vulnerability scanner based on Nessus.
*   Nikto: Web server scanner to identify potential vulnerabilities.
    * Example: `nikto -h example.com`

### Manual Vulnerability Analysis

*   Code Review: Examining source code for potential vulnerabilities.
*   Configuration Audits: Reviewing system configurations for weaknesses.
*   Example: Checking for default passwords or insecure configurations.

## Common Vulnerabilities

### OWASP Top 10

*   Injection: SQL Injection, Command Injection, Cross-Site Scripting (XSS).
*   Broken Authentication: Weak passwords, session management issues.
*   Sensitive Data Exposure: Unprotected data storage, weak encryption.
*   XML External Entities (XXE): Exploiting XML parsers.
*   Broken Access Control: Privilege escalation, unauthorized access.

### Buffer Overflow

*   Understanding Stack and Heap: Memory regions and their function.
*   Exploitation Techniques: Overwriting return addresses to execute arbitrary code.

### Format String Vulnerabilities

*   Understanding Format Strings: How `printf` and similar functions work.
*   Exploitation Techniques: Using format specifiers to read from and write to memory.

# IV. Exploitation

## Metasploit Framework

### Introduction to Metasploit

*   Modules: Exploits, auxiliary modules, payloads.
*   Database: Storing scan results and session information.

### Exploitation with Metasploit

*   Searching for Exploits: Using `search` command to find relevant exploits.
*   Configuring Exploits: Setting options such as `RHOST`, `LHOST`, `TARGET`.
*   Launching Exploits: Using `exploit` command to run the exploit.

### Payload Delivery

*   Reverse Shell: Connecting back to the attacker's machine.
*   Bind Shell: Listening for connections on the target machine.
*   Meterpreter: Advanced payload with features like file system access, shell access, and keylogging.

## Manual Exploitation

### SQL Injection Exploitation

*   Identifying SQL Injection: Using techniques like error-based SQL injection.
*   Exploitation Techniques: Using tools like `sqlmap` or manual queries to extract data.
    * Example: `sqlmap -u "http://example.com/article?id=1" --dbs`

### Cross-Site Scripting (XSS) Exploitation

*   Types of XSS: Stored, Reflected, DOM-based XSS.
*   Exploitation Techniques: Injecting malicious scripts to steal cookies or redirect users.

### Command Injection Exploitation

*   Identifying Command Injection: Injecting operating system commands through web applications.
*   Exploitation Techniques: Executing commands to gain control of the server.

# V. Post-Exploitation

## Maintaining Access

### Backdoors

*   Creating Backdoors: Planting backdoors using Metasploit or manually.
*   Types of Backdoors: Web shells, SSH keys, cron jobs.

### Privilege Escalation

*   Kernel Exploits: Exploiting kernel vulnerabilities to gain root access.
*   Misconfigured Services: Exploiting services running with elevated privileges.
*   SUID/SGID binaries: Abusing binaries with setuid/setgid bits set.
*   Example: Finding SUID binaries with `find / -perm -4000 -ls`

## Data Exfiltration

### Techniques

*   Tunneling: Using tools like `ssh`, `ngrok` to tunnel traffic.
*   File Transfer: Using tools like `scp`, `wget` to transfer files.
*   Data Compression: Using tools like `gzip`, `tar` to compress data.
*   Steganography: Hiding data within images or other files.

## Covering Tracks

### Log Manipulation

*   Clearing Logs: Removing or modifying log entries to hide activity.
*   Tools: `shred`, `dd` can be used to overwrite data.

### Time Stomping

*   Modifying Timestamps: Changing file timestamps to blend in with other files.
*   Tool: `touch -r <reference_file> <target_file>`

# VI. Reporting and Documentation

## Creating a Penetration Testing Report

### Executive Summary

*   Brief overview of the findings and recommendations.

### Technical Details

*   Detailed description of vulnerabilities and exploitation steps.

### Recommendations

*   Specific actions to remediate vulnerabilities.

### Tools and Methodologies

*   Listing of tools used and methodologies followed.

## Communicating Findings

### Presenting Findings

*   Clearly communicating technical information to stakeholders.
*   Providing actionable recommendations.

### Documenting Results

*   Maintaining accurate records of testing activities.
*   Storing data securely and confidentially.
